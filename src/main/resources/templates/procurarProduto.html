<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <title>Procurar produto</title>
        <link rel="stylesheet" href="/css/procurarProduto.css" th:href="@{/css/procurarProduto.css}"/>
    </head>
    <body>
        <br>
        <br>
        <div class="tabela">       
            <table style="display: inline-block ;height: 700px;" id="produtosTable">
                <tr class="legenda">
                    <th>produtos_id</th>
                    <th>nome_produto</th>
                    <th>quantidade</th>
                    <th>valor</th>
                    <th>marca</th>
                </tr>
                <tr th:each="produtos : ${produtos}">
                    <td th:text="${produtos.produtos_id}" >id<</td>
                    <td th:text="${produtos.nome_produto}" >nome_produto<</td>
                    <td th:text="${produtos.quantidade}" >quantidade<</td>
                    <td th:text="${produtos.valor}" >valor<</td>
                    <td th:text="${produtos.marca}" >marca<</td>
                </tr>     
            </table>
            </div>
            <br>
            <div class="form">
            <form onsubmit="return false;">
                <div>
                    <label for="pesquisar" style="margin-left: 7%;"> Pesquisar nome do produto </label>
                    <input type="text" name="pesquisar" id="pesquisar">
                    <input class="buttons" type="button" th:onclick="'window.location.href=\'' + @{/navegar/telaPrincipal} + '\''" value="Voltar" />
                </div>
            </form>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const input = document.getElementById('pesquisar');
                const table = document.getElementById('produtosTable');
                if (!table) return;
                const tbody = table.tBodies[0];
                const rows = Array.from(table.querySelectorAll('tr')).slice(1);

                input.addEventListener('input', function() {
                    const filter = input.value.trim().toLowerCase();
                    rows.forEach(row => {
                        const nomeCell = row.cells[1];
                        const text = nomeCell ? nomeCell.textContent.trim().toLowerCase() : '';
                        row.style.display = text.includes(filter) ? '' : 'none';
                    });
                });
            });
        </script>
    </body>
</html>
